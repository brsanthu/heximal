<!doctype html>
<html>
  <head>
    <title>Fetch</title>
    <script type="module" src="./index.js"></script>
  </head>
  <body>
    <h1>Fetch</h1>
    <p>
      A network fetch can be declared with an <code>&lt;h-fetch></code> element.
    </p>

    <template h-auto>
      <h-var name="url" value="./foo.json"></h-var>
      <h-out expr="url"></h-out>

      <p>URL: {{ url }}</p>

      <h-fetch id="fetch" url="{{ url }}" type="json"></h-fetch>

      <!-- Bind an input to the `url` variable, so we can change it -->
      <p>
        URL:
        <input .value="{{ url }}" @change="{{ (e) => url = e.target.value }}" />
      </p>

      <template type="if" if="{{ $('#fetch').status === 'complete' }}">
        <pre><code>{{ JSON.stringify($('#fetch').value) }}</code></pre>
      </template>   

      <template type="if" if="{{ $('#fetch').status === 'error' }}">
        <p>Error: {{ $('#fetch').error }}</p>
      </template>      

    </template>
  </body>
</html>
